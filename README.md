# Quiz Bots for Telegram and VK

Проект представляет собой двухботовую систему для викторины: боты в Telegram и ВКонтакте задают пользователям вопросы из текстового файла, принимают ответы, проверяют их и показывают правильные ответы по запросу.

- Пример работы бота VK:

![image](https://i.imgur.com/Obwxocn.gif)

- Пример работы бота в TELEGRAM:

![image](https://i.imgur.com/JLODOK0.gif)

## Функционал

- Задать новый вопрос

- Ответить на вопрос

- Сдаться и узнать правильный ответ

- Просмотр счёта (пока не реализован)

- Работа с вопросами из файла с помощью регулярных выражений

- Хранение текущего вопроса пользователя в Redis

## Используемые технологии

- Python 3.8+

- Telegram Bot API (python-telegram-bot)

- VK API (vk_api)

- Redis для хранения сессий

- dotenv для хранения токенов и конфигураций

- Регулярные выражения для парсинга вопросов из текстового файла

## Установка и запуск

1. Клонируйте репозиторий:

```bash
git clone <repo-url>
cd <project-folder>
```

2. Создайте виртуальное окружение.

```bash
python -m venv venv
```

3. Установите зависимости:

```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` в корне проекта и добавьте в него:

```env
TELEGRAM_BOT_TOKEN=ваш_токен_телеграм_бота
VK_API_KEY=ваш_токен_вк_бота
REDIS_PORT=порт_на_Redis
REDIS_PASSWORD=пароль_на_Redis
REDIS_HOST=хост_на_Redis
REDIS_USERNAME=имя_пользователя_на_Redis
QUESTIONS_FILE=путь_к_файлам_с_вопросами
```

5. Запустите Redis сервер (если локально) или настройте доступ к удалённому Redis(файл `redis_connect.py` предназначен для удалённого подключения).

6. Запустите Telegram-бота:

```bash
python tg_bot.py
```

7. Запустите VK-бота:

```bash
python vk_bot.py
```

## Настройка пути к файлу с вопросами

Файл с викторинами `(.txt)` можно задавать без изменения кода. Это удобно при тестировании и развертывании в разных окружениях.

### Способы настройки

1. Через аргумент командной строки
   Укажите путь при запуске бота:

Telegram бот:

```bash
python tg_bot.py --questions path/to/your_questions.txt
```

VK бот:

```bash
python vk_bot.py --questions path/to/your_questions.txt
```

2. Через переменную окружения
   Добавьте переменную в `.env` файл:

```env
QUESTIONS_FILE=path/to/your_questions.txt
```

Бот автоматически подхватит эту настройку при запуске.

3. Умолчание
   Если не указано ничего, используется стандартный файл:

```text
quiz-questions/1vs1200.txt
```

## Структура проекта

`tg_bot.py` — запуск Telegram-бота

`vk_bot.py` — запуск VK-бота

`handlers_for_tg.py` — обработчики для Telegram-бота

`handlers_for_vk.py` — обработчики для VK-бота

`qaestion.py` — парсинг вопросов и ответов из текстового файла

`quiz_utils.py`- основная функция в этом файле — `normalize_answer()`, которая выполняет нормализацию ответов пользователей и правильных ответов для корректного сравнения.

`redis_connect.py` — подключение к Redis

`redis_utils.py` — функции для сохранения и получения вопросов из Redis

`quiz-questions/` — папка с текстовыми файлами вопросов

## Примечания

Функция подсчёта и отображения счета пока не реализована.
